<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Manage Jinya Backup</title>
    <link href="node_modules/@jinyacms/cosmo/variables.css" rel="stylesheet">
    <link href="node_modules/@jinyacms/cosmo/lato.css" rel="stylesheet">
    <link href="node_modules/@jinyacms/cosmo/scrollbars.css" rel="stylesheet">
    <link href="node_modules/@jinyacms/cosmo/layout.css" rel="stylesheet">
    <link href="node_modules/@jinyacms/cosmo/form.css" rel="stylesheet">
    <link href="node_modules/@jinyacms/cosmo/modal.css" rel="stylesheet">
    <link href="node_modules/@jinyacms/cosmo/progress.css" rel="stylesheet">
    <link href="node_modules/@jinyacms/cosmo/list.css" rel="stylesheet">
    <link href="node_modules/@jinyacms/cosmo/toolbar.css" rel="stylesheet">
    <link href="node_modules/@jinyacms/cosmo/typography.css" rel="stylesheet">
    <link href="node_modules/@jinyacms/cosmo/tab.css" rel="stylesheet">
    <link href="node_modules/@jinyacms/cosmo/table.css" rel="stylesheet">
    <link href="node_modules/@jinyacms/cosmo/key-value-list.css" rel="stylesheet">
    <link href="css/jinya.css" rel="stylesheet">
</head>
<body>
<main class="cosmo-page-layout jinya-hidden">
    <div class="cosmo-top-bar">
        <div class="cosmo-profile-picture"></div>
        <a class="cosmo-top-bar__menu-item jinya-top-bar__menu-item--logout" data-action="logout">Logout</a>
    </div>
    <div class="cosmo-menu-bar">
        <button class="cosmo-menu-bar__back-button" disabled type="button"></button>
        <nav class="cosmo-menu-bar__menu-collection" data-menu="login">
            <div class="cosmo-menu-bar__main-menu">
                <span class="cosmo-menu-bar__main-item cosmo-menu-bar__main-item--active">Login</span>
            </div>
        </nav>
        <nav class="cosmo-menu-bar__menu-collection" data-menu="app">
            <div class="cosmo-menu-bar__main-menu">
                <a class="cosmo-menu-bar__main-item cosmo-menu-bar__main-item--active" data-menu-item="backups"
                   href="#backups">Backup Jobs</a>
                <a class="cosmo-menu-bar__main-item" data-menu-item="users" href="#users">Users</a>
                <a class="cosmo-menu-bar__main-item" data-menu-item="import-export" href="#import-export">Import &
                    Export</a>
            </div>
        </nav>
    </div>
    <div class="cosmo-page-body" data-role="page-body"></div>
</main>

<script type="text/x-handlebars-template" id="jobListTemplate">
    <div class="cosmo-page-body__content">
        <div class="cosmo-list">
            <nav class="cosmo-list__items">
                {{#jobs}}
                    <a class="cosmo-list__item" data-action="change-job" data-job-id="{{id}}">{{name}}</a>
                {{/jobs}}
                <button class="cosmo-button cosmo-button--full-width" data-action="add-job">Create Job</button>
            </nav>
            <div class="cosmo-list__content">
            </div>
        </div>
    </div>
</script>
<script type="text/x-handlebars-template" id="jobItemDetailsTemplate">
    <div class="cosmo-tab-control">
        <div class="cosmo-tab-control__tabs">
            <a data-action="details" class="cosmo-tab-control__tab-link cosmo-tab-control__tab-link--active">Details</a>
            <a data-action="backups" class="cosmo-tab-control__tab-link">Backups</a>
        </div>
        <div class="cosmo-tab-control__content" data-content-type="details">
            <div class="cosmo-toolbar">
                <div class="cosmo-toolbar__group">
                    <button type="button" data-id="{{id}}" class="cosmo-button" data-action="edit-job">Edit</button>
                </div>
                <div class="cosmo-toolbar__group">
                    <button type="button" data-id="{{id}}" class="cosmo-button" data-action="delete-job">Delete</button>
                </div>
            </div>
            <span class="cosmo-title">{{job.name}}</span>
            <dl class="cosmo-key-value-list">
                <dt class="cosmo-key-value-list__key">ID</dt>
                <dd class="cosmo-key-value-list__value">{{job.id}}</dd>
                <dt class="cosmo-key-value-list__key">Type</dt>
                <dd class="cosmo-key-value-list__value">{{job.type}}</dd>
                <dt class="cosmo-key-value-list__key">Host</dt>
                <dd class="cosmo-key-value-list__value">{{job.host}}</dd>
                <dt class="cosmo-key-value-list__key">Port</dt>
                <dd class="cosmo-key-value-list__value">{{job.port}}</dd>
                <dt class="cosmo-key-value-list__key">Remote path</dt>
                <dd class="cosmo-key-value-list__value">{{job.remotePath}}</dd>
                <dt class="cosmo-key-value-list__key">Local path</dt>
                <dd class="cosmo-key-value-list__value">{{job.localPath}}</dd>
            </dl>
        </div>
        <div class="cosmo-tab-control__content jinya-hidden" data-content-type="backups">
            <table class="cosmo-table">
                <thead>
                <tr>
                    <th>#</th>
                    <th>Name</th>
                    <th>Backup Date</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody>
                {{#each backups}}
                    <tr>
                        <td>{{id}}</td>
                        <td>{{name}}</td>
                        <td>{{formatDate backupDate}}</td>
                        <td>
                            <div class="cosmo-toolbar__group">
                                <a target="_blank" href="/api/backup-job/{{job.id}}/backup/{{id}}"
                                   class="cosmo-button">Download</a>
                                <button type="button" data-job-id="{{job.id}}" data-id="{{id}}" class="cosmo-button"
                                        data-action="delete-backup">Delete
                                </button>
                            </div>
                        </td>
                    </tr>
                {{/each}}
                </tbody>
            </table>
        </div>
    </div>
</script>
<script type="text/x-handlebars-template" id="createJobTemplate">
    <form class="cosmo-modal" data-role="add-job-modal">
        <h1 class="cosmo-modal__title">Add FTP job</h1>
        <div class="cosmo-modal__content">
            <div class="cosmo-input__group">
                <label class="cosmo-label" for="name">Name</label>
                <input class="cosmo-input" id="name" placeholder="Name" required type="text">
                <label class="cosmo-label" for="type">Server type</label>
                <select class="cosmo-select" id="type" required>
                    <option value="ftp" selected>FTP</option>
                    <option value="sftp">SFTP</option>
                </select>
                <label class="cosmo-label" for="host">Host</label>
                <input class="cosmo-input" id="host" placeholder="Host" required type="text">
                <label class="cosmo-label" for="port">Port</label>
                <input class="cosmo-input" id="port" placeholder="Port" required type="number">
                <label class="cosmo-label" for="username">Username</label>
                <input class="cosmo-input" id="username" placeholder="Username" required
                       type="text">
                <label class="cosmo-label" for="password">Password</label>
                <input class="cosmo-input" id="password" placeholder="Password" required
                       type="password">
                <label class="cosmo-label" for="remotePath">Remote path</label>
                <input class="cosmo-input" id="remotePath" placeholder="Remote path" required
                       type="text">
                <label class="cosmo-label" for="localPath">Local path</label>
                <input class="cosmo-input" id="localPath" placeholder="Local path" required
                       type="text">
            </div>
        </div>
        <div class="cosmo-modal__button-bar">
            <button class="cosmo-button" type="submit">Save job</button>
            <button class="cosmo-button" data-role="cancel-job-modal" type="button">Cancel</button>
        </div>
    </form>
</script>
<script type="text/x-handlebars-template" id="editJobTemplate">
    <form class="cosmo-modal" data-role="edit-job-modal">
        <h1 class="cosmo-modal__title">Edit FTP job</h1>
        <div class="cosmo-modal__content">
            <div class="cosmo-input__group">
                <label class="cosmo-label" for="name">Name</label>
                <input class="cosmo-input" id="name" placeholder="Name" required type="text" value="{{name}}">
                <label class="cosmo-label" for="type">Server type</label>
                <select class="cosmo-select" id="type" required>
                    <option {{#eq host.type 'ftp'}}selected{{/eq}} value="ftp">FTP</option>
                    <option {{#eq host.type 'sftp'}}selected{{/eq}} value="sftp">SFTP</option>
                </select>
                <label class="cosmo-label" for="host">Host</label>
                <input class="cosmo-input" id="host" placeholder="Host" required type="text" value="{{host}}">
                <label class="cosmo-label" for="port">Port</label>
                <input class="cosmo-input" id="port" placeholder="Port" required type="number" value="{{port}}">
                <label class="cosmo-label" for="username">Username</label>
                <input class="cosmo-input" id="username" placeholder="Username" required type="text"
                       value="{{username}}">
                <label class="cosmo-label" for="password">Password</label>
                <input class="cosmo-input" id="password" placeholder="Password" type="password" value="{{password}}">
                <label class="cosmo-label" for="remotePath">Remote path</label>
                <input class="cosmo-input" id="remotePath" placeholder="Remote path" required type="text"
                       value="{{remotePath}}">
                <label class="cosmo-label" for="localPath">Local path</label>
                <input class="cosmo-input" id="localPath" placeholder="Local path" required type="text"
                       value="{{localPath}}">
            </div>
        </div>
        <div class="cosmo-modal__button-bar">
            <button class="cosmo-button" type="submit">Save job</button>
            <button class="cosmo-button" data-role="cancel-job-modal" type="button">Cancel</button>
        </div>
    </form>
</script>

<script type="text/x-handlebars-template" id="userListTemplate">
    <div class="cosmo-page-body__content">
        <div class="cosmo-toolbar">
            <div class="cosmo-toolbar__group">
                <button data-action="create-user" class="cosmo-button" type="button">Create user</button>
            </div>
        </div>
        <table class="cosmo-table">
            <thead>
            <tr>
                <th>#</th>
                <th>Name</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            {{#each users}}
                <tr>
                    <td>{{id}}</td>
                    <td>{{name}}</td>
                    <td>
                        <div class="cosmo-toolbar__group">
                            <button type="button" data-id="{{id}}" data-action="edit-user" class="cosmo-button">Edit
                            </button>
                            <button type="button" data-id="{{id}}" class="cosmo-button" data-action="delete-user">Delete
                            </button>
                        </div>
                    </td>
                </tr>
            {{/each}}
            </tbody>
        </table>
    </div>
</script>
<script type="text/x-handlebars-template" id="addUserTemplate">
    <form class="cosmo-modal" data-role="add-user-modal">
        <div class="cosmo-modal__title">Add user</div>
        <div class="cosmo-modal__content">
            <div class="cosmo-input__group" data-role="login-form">
                <label class="cosmo-label" for="username">Username</label>
                <input class="cosmo-input" id="username" name="username" placeholder="Username" required type="text">
                <label class="cosmo-label" for="password">Password</label>
                <input class="cosmo-input" id="password" name="password" placeholder="Password" required
                       type="password">
            </div>
        </div>
        <div class="cosmo-modal__button-bar">
            <button class="cosmo-button" type="submit">Save user</button>
            <button class="cosmo-button" data-action="cancel-modal" type="button">Cancel</button>
        </div>
    </form>
</script>
<script type="text/x-handlebars-template" id="editUserTemplate">
    <form class="cosmo-modal" data-role="edit-user-modal">
        <div class="cosmo-modal__title">Edit user</div>
        <div class="cosmo-modal__content">
            <div class="cosmo-input__group">
                <label class="cosmo-label" for="username">Username</label>
                <input class="cosmo-input" autocomplete="false" id="username" name="username" placeholder="Username"
                       required type="text"
                       value="{{name}}">
                <label class="cosmo-label" for="password">Password</label>
                <input class="cosmo-input" autocomplete="false" id="password" name="password" placeholder="Password"
                       required
                       type="password">
            </div>
        </div>
        <div class="cosmo-modal__button-bar">
            <button class="cosmo-button" type="submit">Save user</button>
            <button class="cosmo-button" data-action="cancel-modal" type="button">Cancel</button>
        </div>
    </form>
</script>

<script type="text/x-handlebars-template" id="importExportTemplate">
    <div class="cosmo-page-body__content">
        <h3>Export your current database</h3>
        <div>
            <a href="/api/export" target="_blank" class="cosmo-button" id="exportDatabase">Export</a>
        </div>
        <h3>Import backup</h3>
        <div class="cosmo-input__group">
            <label for="filePicker" class="cosmo-label">Pick backup file</label>
            <input id="filePicker" type="file" class="cosmo-input">
        </div>
        <div class="cosmo-button__container">
            <button class="cosmo-button" id="importDatabase">Import</button>
        </div>
    </div>
</script>

<script src="lib/js/handlebars.js"></script>
<script type="module" src="js/index.js"></script>
</body>
</html>